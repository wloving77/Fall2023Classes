<!DOCTYPE html>

<!-- This will be the login/signup page -->

<html>

<head>
    <link rel="stylesheet" href="./style.css">

    <title> Auth </title>
    <h1>Please Login/Signup:</h1>
</head>

<body>
    <div id="loginContainer" style="display:none;">
        <h2>Login</h2>
        <br>
        <div class="form-group">
            <label for="username">Username:</label>
            <input type="text" id="usernameLogin" name="username" required>
        </div>
        <br>
        <div class="form-group">
            <label for="password">Password:</label>
            <input type="password" id="passwordLogin" name="password" required>
        </div>
        <br>
        <button type="submit" onclick="validateLogin()" class="login-button">Login</button>
    </div>


    <div id="signupContainer" style="display:block;">
        <h2>Signup</h2>
        <br>
        <div class="form-group">
            <label for="username">New Username:</label>
            <input type="text" id="usernameSignup" name="username" required>
        </div>
        <br>
        <div class="form-group">
            <label for="password">Set Password:</label>
            <input type="password" id="passwordSignup" name="password" required>
        </div>
        <br>
        <div class="form-group">
            <label for="password">Confirm Password:</label>
            <input type="password" id="confirmPasswordSignup" name="password" required>
        </div>
        <br>
        <div class="form-group">
            Create Admin Account? <input type="checkbox" id="adminCheckbox">
        </div>
        <br>
        <button type="submit" onclick="validateSignup()" class="login-button">Signup</button>
    </div>
    <br>

    <div id="swapButton">
        <h3> Already Have an Account? </h3>
        <button onclick="toggleLoginView()"> Login </button>
    </div>

    <script src="./auth.js"></script>


    <script>

        // redirect to the home page:
        checkForSessionToken().then(returnData => {
            if (returnData.success) {
                window.location = "/";
            }
        })

        function toggleLoginView() {

            let loginDiv = document.getElementById("loginContainer");
            let signupDiv = document.getElementById("signupContainer");

            let swapBtn = document.getElementById("swapButton");

            //login mode: state=true
            //signup mode: state=false
            let state = signupDiv.style.display == "none";

            // swap to whatever the opposite state is, if login mode, go to signup mode and vice versa 

            loginDiv.style.display = state == true ? "none" : "block";
            signupDiv.style.display = state == true ? "block" : "none";

            //modify button: 

            swapBtn.querySelector("h3").innerHTML = state == true ? "Already Have an Account?" : "Make an Account?";
            swapBtn.querySelector("button").innerHTML = state == true ? "Login" : "Signup";

        }


    </script>

</body>

</html>
---
title: " Exploratory Data Analysis (20 pts)"
output: html_document
---

### Objective
- practice exploratory analysis/descriptive analysis in R

### Task
- follow the prompts below
- include all relavent code
- cite sources in which you used for significant help

TOTAL POINTS: 20
**You will submit the RMD and html output.**

This assignment will use the popular Titanic dataset.
Find the data dictionary for the dataset here: https://www.kaggle.com/competitions/titanic/data

```{r}
# Load the dataset; assign the dataframe to an object called 'titanic'

library(readr)
library(dplyr)

data <- read.csv("data/titanic.csv")

```

## Question 1 (0.5 point)
```{r}
# Look at the first 6 rows of data

head(data)

```

## Question 2 (2 point)
```{r}
# Look at the structure of your data - specifically the columns `sex` and `survived`. Change the data type as needed.

str(data)

data$sex = factor(data$sex)

data$survived = factor(data$survived)

data$age = as.integer(data$age)

str(data)

```

## Question 3 (.5 points)
```{r}
# print summary statistics for the dataset

summary(data)
```

## Question 4 (1 point)
```{r}
# subset the dataframe to include passengers in 2nd class and include the columns for name, age, and sex

data_class <- data[data$pclass==2, c("name", "age", "sex")]

head(data_class)

```

## Question 5 (2 point)
```{r}
# How many NAs are in the full dataset? 

sum(is.na(data))


# How many NAs are in the 'age' column? (hint: you may need to Google)

sum(is.na(data$age))


```

## Question 6 (1 point)
```{r}
# Recode the variable 'sex' so that 'male' becomes 'm' and 'female' becomes 'f'

data <- data%>%
  mutate(sex = recode(sex, 
                      "male"="m",
                      "female"="f"
                      ))

head(data)

```

## Question 7 (1 point)
```{r}
# What is the average ticket price for a first class ticket?
# (optional: round to 2 decimal points)

head(data)

data_first_class <- data[data$pclass==1, ]

data_first_class$fare = as.numeric(data_first_class$fare)


round(mean(data_first_class$fare), 2)

```

## Question 8 (1 point)
```{r}
# Plot a histogram for the fare price 

library(ggplot2)

ggplot(data, aes(x = fare)) + geom_histogram()

```

## Question 9 (2 point)
```{r}
# Graph fare price histograms by embarkment point using a single ggplot() call. 

ggplot(data, aes(x=fare, fill=embarked)) + geom_histogram(binwidth=10) +   facet_wrap(~ embarked, ncol = 1)


```


## Question 10 (1 point)
```{r}
# Write one sentence interpreting the graph from Question  9

#The S class of Embarkment sees the most passengers and consequently the #most fare price data points.

```

## Question 11 (2 point)
```{r}
# Create a barplot of cabin class vs sex (use proportions)

ggplot(data, aes(x=factor(pclass), fill=sex)) + 
  scale_fill_manual(values = c("red","blue")) +
  geom_bar(position="dodge") +
  labs(x="Cabin Class", y="SexCount")

```

## Question 12 (2 point)

```{r}
# Create a graph that depicts the prevalence of survival based on passenger's sex. 


ggplot(data, aes(x=factor(survived), fill=sex)) + 
  scale_fill_manual(values = c("red", "blue")) +
geom_bar(position="dodge") + 
  labs(x="Survived", y="SexCount")


```

## Question 13 (4 points)

```{r}
# For the 4 charts you made above:

# 1) change the color of the graph away from the default?
# 2) include appropriate/easy to interpret chart labels?
# 3) use a consistent theme?
```





